# 1. Apache, Nginx 웹서버란?

설명하기 앞서 둘은 **웹서버다.**

---

## 웹 서버란?

![](https://velog.velcdn.com/images%2Fmuchogusto%2Fpost%2F4927a042-9e7b-4dd6-9f4b-2b441b7ab6df%2Fimage.png)
크게 2가지로 볼 수 있다. 하드웨어와 소프트웨어.

**1줄 요약 : 웹서버(소프트웨어)는 크롬, Safari 같은 웹 브라우저 클라이언트로부터 HTTP 프로토콜로 요청을 받아 HTML 문서 등과 같은 정적 웹페이지를 웹브라우저로 응답해주는 소프트웨어다.**

웹 서버 (하드웨어)는 위 기능을 수행하는 프로그램을 실행하는 컴퓨터를 말한다.

_보통 웹 서버는 소프트웨어를 말하는데, 간혹 하드웨어를 붙이지 않고 후자를 말해 혼동스러울 때도 있다._

---

## 알아보니 동적 서버(Web Application Server)가 있고, 정적 서버(Web Server)가 있던데?

이를 위해서는 우선 정적 페이지 개념과 동적 페이지 개념을 알아야 한다.

### 정적 페이지(Static Pages)란?

![](https://gmlwjd9405.github.io/images/web/static-vs-dynamic.png)

- **정적(static) : 외부 환경과 무관하게 일정한 결과값을 제공한다.**
- 요리로 생각하면 편의점 음식이다. 진열되어 있는 것들이고, 조리가 없다.
- **웹 서버**에 미리 저장된 파일(HTML 파일, 이미지, JavaScript 파일 등)이 **가공없이 그대로 전달되는 웹 페이지.**
- 웹 서버는 사용자가 요청(Request)에 해당하는 저장된 웹 페이지를 보낸다.
- 사용자는 서버에 저장된 데이터가 변경되지 않는 한 고정된 웹 페이지를 보게 된다.
- 그러나 js의 시간 표시, 랜덤 난수 등을 사용하거나, 서버에 직접 추가요청을 보내는 것으로 동적 웹페이지처럼 보이는 정적 웹도 많다.
- 즉, 정적 웹의 기준은 **접속할 때마다 받게 되는 파일들(HTML, CSS, JS 등)이 같은가에 달려 있다.**
- EX : 회사 페이지, 댓글 없는 블로그 등

즉, 정적인 **웹서버**에서 정적 웹페이지를 다루며, 데이터를 가공하지 않는다.

---

## 정적이 있으면, 동적 웹페이지(Dynamic Pages)도 있겠네?

물론 있다.

- 동적(dynamic) : 외부 환경에 따라 다른 결과값을 제공한다.
- 말 그대로 동적. 데이터를 가공처리해서 보낸다.
- 동적 웹페이지는 **웹 어플리케이션 서버**(Web Application Server)에 있는 **데이터들을 스크립트에 의해 가공처리한 후** 생성되어 전달되는 웹 페이지.

  **웹 어플리케이션 서버 :** 일종의 API 서버, DB와 통신하며 데이터를 가공하고 전달하기 때문

- 서버는 사용자의 요청(Request)을 해석해 데이터를 가공한 후 생성되는 웹페이지를 보낸다
- 사용자는 상황, 시간, 요청 등에 따라 달라지는 웹페이지를 보게 됨.
- EX: 뉴스 웹페이지, 댓글이 많은 SNS, 게시판 등

즉, 동적 웹서버에서 동적 웹페이지를 다루며 데이터를 가공한다.

### Q. **그렇다면 무조건 동적 웹이 정적 웹보다 좋은가?**

### A. **아니다. 웹페이지 성격에 따라 다르다.**

- 정적 웹보다 동적 웹의 구축이 더 많은 과정을 필요로 한다.
- 동적 웹에서 DB와 상호작용하기 때문에 DB 정보가 보관, 관리가 까다로울 수 있다.
- 그냥 저장했다가 꺼내기만 할 거면 복잡한 상호작용이 필요없어 예전에는 동적으로 만들었던 사이트나 블로그를 정적으로 다시 바꾸는 경우도 종종 있다.
- 정적 웹으로도 복잡한 어플리케이션을 구현할 수 있다. **CSR이 대표적인 사례
  ⇒ 이 점에서 Vue, react 등을 정적 웹으로도 구현할 수 있다.**

---

## 웹 어플리케이션 서버(WAS)가 동적 웹페이지 데이터를 가공해서 다룬다는 건 알겠다. 그렇다면 WAS란 어떤 역할을 수행하는가?

![](https://gmlwjd9405.github.io/images/web/webserver-vs-was1.png)

- **1줄 요약 : 클라이언트의 요청을 받아 DB조회, 어떤 로직을 수행해야 하는 등 동적 컨텐츠를 응답하는 서버**
  - 웹 서버와 웹 컨테이너로 구성되어 있다.
  - 즉, WAS는 웹 서버를 위와 같이 내포하고 있다.
  - 인터넷 상에서 HTTP를 통해 사용자 컴퓨터 or 장치에 어플리케이션을 실행해주는 미들웨어(소프트웨어 엔진)다.
  - 동적 서버 컨텐츠를 수행한다는 점에서 일반 웹 서버와 차별화되며, 주로 DB 서버와 같이 수행된다.

## 그러면 웹 컨테이너란 무엇이며? 왜 필요한가?

![](https://doozi316.github.io/assets/images/WEB25/1.png)

- **1줄 요약: 웹서버가 보낸 JSP, PHP 등 파일을 실행하고, 수행한 결과를 다시 웹 서버로 돌려보내는 역할을 한다.**

- Apache는 CGI(Common Gate Way), 즉, 공용 게이트웨이 인터페이스란 개념을 지원한다.
  - 인터페이스는 접점이란 뜻, 즉, 웹 서버와 외부 프로그램 사이에서 정보를 주고받는 방법이나 규약을 정의한 것이다.
  - 그렇지만 CGI는 서버와 직접적으로 연결되어 있지 않은 문제점이 있으며, 속도, 효율, 보안성도 JAVA에서 만든 Servlet보다 떨어졌다.
- 그러나 JAVA Servlet은 동적인 웹페이지를 만들기 위한 기술이라 바로 웹서버에서 사용하는 것은 불가능했다. CGI 적용이 독립적인 JAVA에는 불가능했기 때문. 그 결과, Servlet을 사용하기 위해 컨테이너가 도입된다.
- 서버에 서블릿을 넣었다고 스스로 작동하지 않고, 서블릿을 관리할 필요가 있다. 그 역할을 하는 게 서블릿 컨테이너다. 서블릿 컨테이너는 웹서버와 소켓을 만들어 통신하며, 대표적인 예로 톰캣이 있다.

즉, 위와 같은 요인 때문에 웹 컨테이너는 JAVA Servlet과 상호작용하며, Servlet을 관리한다.

---

## 그냥 WAS만 하지, 뭐하러 그러면 Web Server까지...?

- 분업! : 그 이유는 WAS가 동적 처리에 집중하게 만들기 위해서다. 웹 서버는 정적 문서만, WAS는 애플리케이션 로직 처리를 돕게 한다.

- 암호화! : 웹 서버에서 SSL로 HTTP => HTTPS를 만들게 한다.

- 짐 나누기(부하 분산)! : 로드밸런싱이라 말한다. 여러 대로 WAS를 연결할 수 있는데, 이러면 서버 하나에 오류가 발생해도, 그 서버를 잠시 멈춘 뒤, 다른 서버를 재시작하게 함으로써 사용자는 문제를 느끼지 못하고 서비스를 이용할 수 있다.

## 그렇다면 다시 돌아와서 웹서버의 종류를 보자.

웹 서버 종류는 다음과 같다.

1. Apache HTTP Server  
   아파치 재단에서 관리하는 HTTP 웹서버. 리눅스와 윈도우 둘 다 사용 가능하다.  
   리눅스 운영체제, 아파치 웹 서버, Mysql DB, PHP 등으로 운영하는 것을 각각 머릿글자를 따서 **LAMP**라고도 한다.  
   Open-SSL, Mod-SSL 을 설치하여, 보안을 강화할 수 있다. SSL은 암호화 기반 인터넷 보안 프로토콜이며, HTTP + S의 S가 이 SSL이라 보면 된다.
